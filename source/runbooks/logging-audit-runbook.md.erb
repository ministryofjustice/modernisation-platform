---
owner_slack: "#modernisation-platform"
title: S3/Cloudwatch Logs
last_reviewed_on: 2026-01-19
review_in: 6 months
---

# <%= current_page.data.title %>

This runbook summarises Modernisation Platform log source, the pipelines that feed it, where the data lives, and how long it is retained, for audit, security, and operational visibility.


| Log source                         | Description                                                                                | Storage / pipeline                                                                                                                  | Location (S3 / CloudWatch)                      | Retention (days)                                                        |
| ---------------------------------- | ------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------- | ----------------------------------------------------------------------- |
| **Organisation-wide CloudTrail**   | API activity across every MP account (auditing/security).                                  | CloudTrail -> S3 `modernisation-platform-logs-cloudtrail`                                                                            | CloudWatch and S3 with versioning + replication | STANDARD_IA at 90 d, Glacier at 365 d, delete at 730 d                  |
| **AWS Config (all accounts)**      | Resource snapshot + configuration history for compliance/drift.                            | AWS Config -> versioned S3 `modernisation-platform-logs-config`                                                                      | S3 with versioning + replication                | STANDARD_IA at 90 d, Glacier at 365 d, delete at 730 d                  |
| **Route53 public DNS**             | DNS query logs for public zones.                                                           | Route53 -> CloudWatch `/aws/route53/core-public-dns-query-logging` -> Firehose -> S3 `modernisation-platform-logs-r53-public-dns-logs` | CloudWatch and S3 with versioning + replication | CloudWatch 365 d; S3: 90 d -> STANDARD_IA, 365 d -> Glacier, delete 730 d |
| **Route53 resolver / private DNS** | Internal resolver queries (east-west visibility).                                          | Resolver query logging -> CloudWatch `r53-resolver-logs*` -> S3 Cortex buckets                                                        | CloudWatch + short-retention S3                 | CloudWatch 365 d; S3 14 d                                               |
| **VPC / TGW flow logs**            | Flow metadata for shared / inspection VPCs and TGW.                                        | Flow logs -> CloudWatch groups per VPC/TGW; optional S3 `core-logging-vpc-flow-logs`                                                 | CloudWatch + short-retention S3                 | CloudWatch 365 d; S3 14 d                                               |
| **Network firewall logs**          | Captures denied traffic from the inspection firewall.                                      | Network Firewall logging -> CloudWatch `fw-*-logs-*`                                                                                 | CloudWatch                                      | 365 days                                                                   |
| **WAF request logs**               | HTTP request samples for WAF protections.                                                  | Member WAFs -> Firehose -> S3 `modernisation-platform-waf-logs`                                              | S3 with versioning + replication                | STANDARD_IA at 90 d, Glacier at 365 d, delete at 730 d                            |
| **VPN attachment**                 | VPN tunnel logs and metrics.                                                               | CloudWatch `${vpn}-vpn-attachment-logs`                                                                                             | CloudWatch log groups per attachment            | 365 days                                                                 |
| **MP workflow data**               | GitHub Actions polling output for Grafana monitoring.                                      | Lambda -> CloudWatch `modernisation-platform-workflow-data` (`/aws/lambda/github-workflow-data-poller`)                              | CloudWatch                                      | 90 days                                                                   |
| **Cortex ingestion logs**          | Short-lived holding areas for files sent to Cortex XSIAM (flow / resolver / generic logs). | Direct S3 ingestion (`core-logging-vpc-flow-logs`, `r53-resolver-logs`, `generic-logs`)                                             | S3 (no versioning)                              | 14 days                                                                   |
| **EC2 Image Builder logs**         | Build logs and artefacts documenting AMI and component install runs.                       | EC2 Image Builder pipelines -> ephemeral build instances -> S3 `ec2-image-builder-logs-*`                                             | S3 (no versioning, with replication)            | STANDARD_IA at 90 d, Glacier at 365 d, delete at 730 d                  |
| **Generic execution logs**         | Automation code (CUR crawler, GitHub poller, ETL jobs) capturing run output and errors.    | Automation jobs -> CloudWatch log groups                                                                                             | CloudWatch                                      | Varies                                                                  |

