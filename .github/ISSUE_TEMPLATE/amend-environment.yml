name: Amend Modernisation Platform Account
description: Request an amendment to a Modernisation Platform account
labels: ["member request", "kanban", "account-amendment"]

body:
  - type: markdown
    attributes:
      value: |
        ### Purpose
        This form lets you request an amendment to a Modernisation Platform accountâ€™s environment access.
        Please fill out the details below to continue.
  - type: input
    id: account_name
    attributes:
      label: App name (matches JSON filename in environments/)
      placeholder: account-name
      description: "This should match environments/{account-name}.json"
    validations:
      required: true

  - type: dropdown
    id: environment_name
    attributes:
      label: Target environment
      options:
        - development
        - test
        - preproduction
        - production
    validations:
      required: true

  - type: markdown
    attributes:
      value: "### Environment amendment"

  - type: dropdown
    id: environment_change_action
    attributes:
      label: Change action
      options:
        - amend
        - addition
    validations:
      required: true

  - type: markdown
    attributes:
      value: "#### For amendments, specify the current entry to change"

  - type: input
    id: current_sso_group_name
    attributes:
      label: Current SSO group name (for amend)
      placeholder: modernisation-platform-engineers
      description: "Used to locate the existing access entry to amend."
    validations:
      required: false

  - type: input
    id: current_level
    attributes:
      label: Current access level (for amend)
      placeholder: developer
      description: "Used to locate the existing access entry to amend."
    validations:
      required: false

  - type: input
    id: sso_group_name
    attributes:
      label: SSO group name
      placeholder: modernisation-platform-engineers
    validations:
      required: true

  - type: input
    id: level
    attributes:
      label: Access level
      placeholder: developer
    validations:
      required: true

  - type: dropdown
    id: add_additional_reviewers
    attributes:
      label: Add additional reviewers?
      options:
        - "Yes"
        - "No"
    validations:
      required: true

  - type: markdown
    attributes:
      value: "#### For amendments, specify the current reviewers"

  - type: input
    id: current_additional_reviewers
    attributes:
      label: Current additional reviewers (for amend)
      placeholder: alice@example.com, bob@example.com
      description: "Used to locate existing reviewers to amend or replace."
    validations:
      required: false

  - type: input
    id: additional_reviewers
    attributes:
      label: Additional reviewers (comma-separated)
      placeholder: alice@example.com, bob@example.com
      description: "Provide one or more reviewer identifiers (e.g., emails or usernames)."
    validations:
      required: false

  - type: markdown
    attributes:
      value: "### Tags amendment"

  - type: dropdown
    id: tags_change_action
    attributes:
      label: Change action (tags)
      options:
        - amend
        - addition
    validations:
      required: true

  - type: markdown
    attributes:
      value: "#### For amendments, specify the current tag key/value"

  - type: input
    id: current_tag_key
    attributes:
      label: Current tag key (for amend)
      placeholder: infrastructure-support
      description: "Used to locate the existing tag to amend."
    validations:
      required: false

  - type: input
    id: current_tag_value
    attributes:
      label: Current tag value (for amend)
      placeholder: team@example.com
      description: "Used to locate the existing tag to amend."
    validations:
      required: false

  - type: input
    id: tag_key
    attributes:
      label: Tag key
      placeholder: infrastructure-support
    validations:
      required: true

  - type: input
    id: tag_value
    attributes:
      label: Tag value
      placeholder: team@example.com
    validations:
      required: true